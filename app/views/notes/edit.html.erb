<!-- Page Content -->
<div id="page-content-wrapper">
	<div class="top-cont">
    	<a href="<%=notes_path%>">CRM</a> / <a href="<%=notes_path%>">Notes</a> /Edit
    </div>
    
    <div class="">
         <div class="col-md-12">
<!-- Nav tabs --><div class="card card-1 padd0">
                   <ul class="nav nav-tabs" role="tablist">
                       <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">General Info </a></li>
                    </ul>
               </div>
           </div>
 <%=  form_for(@note, url:note_path(@note),method:'PUT') do |f| %>  
           <div class="col-md-12">
               <div class="card card-1">
                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="home">
                           <div class="search-panel">
                               <h4>General Info</h4>
                           </div>
                        	<div class="form-search">
                                    <div class="row">
                                        <div class="col-md-4 col-sm-4">
		                                    <div class="input-field">
		                                        <%= f.text_field :subject ,:class=>"validate",:id=>"subject"%>
		                                        <label class="active" for="subject">Subject <code><%= @note.errors[:subject][0] %></code></label>
		                                    </div>
                                        </div>
                                        <div class="col-md-4 col-sm-4">
		                                    <div class="input-field">
                                          <%= f.select(:customer_id, options_for_select(Array[*User.sales_customers(current_user).collect {|v,i| [v.full_name,v.customer.id] if v.customer.present? }],@note.customer_id),:prompt => 'Please Select') %>
		                                        <label >Customer <code><%= @note.errors[:customer_id][0] %></code></label>
		                                    </div>
                                        </div>
                                        <div class="col-md-4 col-sm-4">
		                                    <div class="input-field">
                                          <%= f.select(:contact_id, options_for_select(Array[*User.sales_contacts(current_user).collect {|v,i| [v.full_name,v.contact.id] if v.contact.present? }],@note.contact_id),:prompt => 'Please Select') %>
		                                        <label>Contact <code><%= @note.errors[:contact_id][0] %></code></label>
		                                    </div>
                                         </div>
                                      </div>
                                      
                                      <div class="row">
                                      	<div class="col-md-12">
		                                    <div class="input-field">
		                                        <%= f.text_field :decription ,:class=>"validate",:id=>"decription"%>
		                                        <label class="active" for="decription">Description <code><%= @note.errors[:decription][0] %></code></label>
		                                    </div>
                                         </div>
                                      </div>
                                      
                                      <div class="row">
                                        <div class="col-md-4 col-sm-4">
                                            <div class="input-field">
                                              <label class="control-label" for="disabledInput" class="input-label">Date Created</label>
                                              <input class="form-control" id="disabledInput" type="text" placeholder="<%= @note.created_at.strftime('%d %B, %Y') %>" disabled="">
                                            </div>
<!-- 		                                    <div class="input-field">
		                                        <%= f.text_field :created_at ,:class=>"datepicker",:id=>"created_at", :value=>@note.created_at.strftime('%d %B, %Y')%>
		                                        <label class="active" for="created_at">Date Created <code><%= @note.errors[:created_at][0] %></code></label>
		                                    </div> -->
                                        </div>
                                        <div class="col-md-4 col-sm-4">
                                            <div class="input-field">
                                              <label class="control-label" for="disabledInput" class="input-label">Created By</label>
                                              <input class="form-control" id="disabledInput" type="text" placeholder="<%= @note.creator.full_name %>" disabled="">
                                            </div>
<!-- 		                                    <div class="input-field">
                                          <%= f.select(:created_by_id, options_for_select(Array[*User.sales_staff_users(current_user).collect {|v,i| [v.full_name,v.id] }], :selected => @note.created_by_id)) %>
		                                        <label >Created By <code><%= @note.errors[:created_by_id][0] %></code></label>
		                                    </div> -->
                                        </div>
                                        <div class="col-md-4 col-sm-4">
                                            <div class="input-field">
                                              <label class="control-label" for="disabledInput" class="input-label">Date Modified</label>
                                              <input class="form-control" id="disabledInput" type="text" placeholder="<%= @note.updated_at.strftime('%d %B, %Y') %>" disabled="">
                                            </div>
<!-- 		                                    <div class="input-field">
		                                        <%= f.text_field :updated_at ,:class=>"datepicker",:id=>"updated_at" , :value=>@note.updated_at.strftime('%d %B, %Y')%>
		                                        <label class="active" for="updated_at">Date Modified <code><%= @note.errors[:updated_at][0] %></code></label>
		                                    </div> -->
                                        </div>
                                      </div>
                                      
                                      <div class="row">
                                        <div class="col-md-4 col-sm-4">
                                            <div class="input-field">
                                              <label class="control-label" for="disabledInput" class="input-label">Modified By</label>
                                              <input class="form-control" id="disabledInput" type="text" placeholder="<%= @note.updater.full_name %>" disabled="">
                                            </div>
<!-- 		                                    <div class="input-field">
                                          <%= f.select(:updated_by_id, options_for_select(Array[*User.sales_staff_users(current_user).collect {|v,i| [v.full_name,v.id] }], :selected => @note.updated_by_id)) %>
		                                        <label >Modified By <code><%= @note.errors[:updated_by_id][0] %></code></label>
		                                    </div> -->
                                        </div>
                                        <div class="col-md-4 col-sm-4"></div>
                                        <div class="col-md-4 col-sm-4"></div>
                                    </div>
                           
                                    <div class="row">
                                        <div class="col-md-12">
		                                    <button type="submit" class="button-1">
		                                    	<span>Save</span>
		                                    </button>

                                        <a href="javascript:void(0)" class="confirm-delete button-1"><span>Delete</span></a>
                                        <%= link_to @note, method: :delete, :class=>"deleted hide" do %><%end%>

		                                    <%= link_to note_path(@note),:class=>"button-1" do %>
		                                    	<span>View</span>
		                                    <%end%>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
				</div>
           	</div>
<%end%>

    	</div>
</div>
<!-- /#page-content-wrapper -->
<script type="text/javascript">
    $('form').find("input[type=text], textarea, input[type=email]").focusin();
    $(".confirm-delete").click(function (e) {
        that = this;
        console.log("this",$(that))
        BootstrapDialog.show({
          title: 'Confirm',
          message: 'Are you sure?',
          buttons: [{
            label: 'Ok',
            action: function(dialogItself) {
              $(that).siblings('a.deleted')[0].click();
              dialogItself.close();
            }
          },{
            label: 'Cancel',
            action: function(dialogItself) {
              dialogItself.close();
            }
          }]
        });
      });
    
</script>